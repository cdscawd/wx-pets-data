
<!doctype html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
  <title>巧口萌宠账号注册</title>
  <link rel="stylesheet" href="styles/weui/weui.css">
  <link rel="stylesheet" href="styles/main.css">
</head>

<body class="default-bg">
  <div class="section-box">
    <article class="weui-article">
      <p>请填写手机号为您的<br/> 巧口萌宠注册账号</p>
    </article>

    <div class="weui-cells weui-cells_form">
      <div id="phone-input-box" class="weui-cell input-border">
        <input class="weui-input" id="phone-number" type="number" pattern="[0-9]*" placeholder="请填写手机号">
      </div>
      <!-- <p class="err-prompt">此账号已被注册，请返回上页重新选择，若忘记密码，可到巧口萌宠App短信验证找回</p>  -->
    </div>

    <div class="weui-cells weui-cells_form">
      <div class="weui-cell_vcode">
        <div class="weui-cell input-border input-code">
          <input class="weui-input " id="phone-code" type="number" pattern="[0-9]*" placeholder="请填写验证码">
        </div>
        <div class="weui-cell__ft code-btn">
          <label id="weui-vcode-btn" class="weui-vcode-btn input-border">获取验证码</label>
          <label id="count-down" class="weui-vcode-btn weui-vcode-count-down input-border" style="display: none">10</label>
        </div>
      </div>
    </div>

    <div class="button-sp-area pets-btn-area next-btn-area">
      <a href="javascript:;" class="weui-btn weui-btn_primary" id="save">下一步</a>
    </div>
  </div>

  <div class="weui-footer">
    <p class="weui-footer__text">Copyright © 2010-2018 Qooco</p>
  </div>

</body>
<script type="text/javascript" src="./scripts/zepto.min.js"></script>
<script type="text/javascript" src="./scripts/weui.min.js"></script>
<script type="text/javascript" src="./scripts/reg.js"></script>

<script type="text/javascript">
  var COUNT_DOWN = 10
  
  // 手机号 input
  $('#phone-number').on('focus', function() {
    $(this).parents('.weui-cells').find('.err-prompt').remove()
  })


  // 获取短信验证码 按钮
  $('#weui-vcode-btn').on('click', function(){
    var phone_number = $('#phone-number').val()
    ERRPrompt('PHONE_NUMBER_ERROR', phone_number )
    if ( isPoneAvailable( phone_number ) ) {
      $(this).hide()
      $('#count-down').css('display', 'inline-block')
      $('#phone-code').focus()
      var timer = setInterval(function() {
        var count = parseInt($('#count-down').text(), 10)
        count --
        $('#count-down').text(count)
        if(count <= 0){
          clearInterval(timer)
          $('#count-down').hide()
          $('#weui-vcode-btn').show()
          $('#count-down').text(COUNT_DOWN)
        }
      }, 1000);
    }
  })

  // 提交按钮
  $('#save').on('click', function(){
    // var loading = weui.loading('提交中...', {
    //   className: 'save'
    // });
    // setTimeout(function () {
    //   loading.hide(function() {
    //     console.log('`loading` has been hidden');
    //   });
    //   weui.toast('提交成功', {
    //     duration: 1000,
    //     className: 'custom-classname',
    //     callback: function(){ console.log('close') }
    //   });
    // }, 3000);

    var phone_number = $('#phone-number').val()
    var phone_code = $('#phone-code').val()
    
  })
  
</script>
</html>
